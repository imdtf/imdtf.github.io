<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.43" />
    <meta name="theme" content="VuePress Theme Hope" />
    <meta property="og:url" content="https://vuepress-theme-hope-v2-demo.mrhope.site/language/java/on-java-8/Appendix-IO-Streams.html"><meta property="og:site_name" content="DTF's blog"><meta property="og:title" content="附录:流式 IO"><meta property="og:type" content="article"><meta property="og:updated_time" content="2022-05-07T12:20:31.000Z"><meta property="og:locale" content="zh-CN"><meta property="article:modified_time" content="2022-05-07T12:20:31.000Z"><link rel="stylesheet" href="//at.alicdn.com/t/font_2410206_mfj6e1vbwo.css"><link rel="manifest" href="/manifest.webmanifest" crossorigin="use-credentials"><meta name="theme-color" content="#46bd87"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover"><title>附录:流式 IO | DTF's blog</title><meta name="description" content="我的学习记录博客">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d2025;
      }

      html,
      body {
        background-color: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.querySelector("html").setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="stylesheet" href="/assets/style.af58f80f.css">
    <link rel="modulepreload" href="/assets/app.597ce2f2.js"><link rel="modulepreload" href="/assets/Appendix-IO-Streams.html.ac5ea88b.js"><link rel="modulepreload" href="/assets/plugin-vue_export-helper.21dcd24c.js"><link rel="modulepreload" href="/assets/Appendix-IO-Streams.html.35950f4f.js"><link rel="prefetch" href="/assets/index.html.e173ef83.js"><link rel="prefetch" href="/assets/ElasticSearch.html.279e5d7b.js"><link rel="prefetch" href="/assets/MQ.html.9d040945.js"><link rel="prefetch" href="/assets/MySQL.html.d1ae2d1e.js"><link rel="prefetch" href="/assets/Redis.html.b201ad05.js"><link rel="prefetch" href="/assets/design-patterns.html.733535fa.js"><link rel="prefetch" href="/assets/dubbo.html.c776d990.js"><link rel="prefetch" href="/assets/git.html.72b47aa0.js"><link rel="prefetch" href="/assets/java-base.html.db5311da.js"><link rel="prefetch" href="/assets/jvm.html.53d34a5d.js"><link rel="prefetch" href="/assets/linux.html.65017b81.js"><link rel="prefetch" href="/assets/maven.html.ceec6571.js"><link rel="prefetch" href="/assets/multi-thread.html.3652cc7f.js"><link rel="prefetch" href="/assets/mybatis.html.cb44fe5a.js"><link rel="prefetch" href="/assets/network.html.b1609fd9.js"><link rel="prefetch" href="/assets/nginx.html.9ca67d3a.js"><link rel="prefetch" href="/assets/soft-power.html.508fb44f.js"><link rel="prefetch" href="/assets/spring-boot.html.e888e4e7.js"><link rel="prefetch" href="/assets/spring-cloud.html.57c2b0d4.js"><link rel="prefetch" href="/assets/spring.html.94b261f5.js"><link rel="prefetch" href="/assets/tomcat.html.dc4aea03.js"><link rel="prefetch" href="/assets/zookeeper.html.75896320.js"><link rel="prefetch" href="/assets/分布式.html.6e369ff9.js"><link rel="prefetch" href="/assets/java-basic-questions-01.html.58f6dba8.js"><link rel="prefetch" href="/assets/00 开篇词 这一次_ 让我们一起来搞懂MySQL.html.04b85b76.js"><link rel="prefetch" href="/assets/01 基础架构 一条SQL查询语句是如何执行的.html.116abb6a.js"><link rel="prefetch" href="/assets/02 日志系统 一条SQL更新语句是如何执行的.html.1d83f138.js"><link rel="prefetch" href="/assets/03 事务隔离 为什么你改了我还看不见.html.40f6f1e4.js"><link rel="prefetch" href="/assets/04 深入浅出索引（上）.html.900bda42.js"><link rel="prefetch" href="/assets/05 深入浅出索引（下）.html.3492d336.js"><link rel="prefetch" href="/assets/06 全局锁和表锁 给表加个字段怎么有这么多阻碍.html.dcc88998.js"><link rel="prefetch" href="/assets/07 行锁功过 怎么减少行锁对性能的影响.html.7239f150.js"><link rel="prefetch" href="/assets/08 事务到底是隔离的还是不隔离的.html.6199feb4.js"><link rel="prefetch" href="/assets/09 普通索引和唯一索引_ 应该怎么选择.html.57624587.js"><link rel="prefetch" href="/assets/10 MySQL为什么有时候会选错索引.html.d99caa1b.js"><link rel="prefetch" href="/assets/11 怎么给字符串字段加索引.html.cabd308f.js"><link rel="prefetch" href="/assets/12 为什么我的MySQL会“抖”一下.html.c89015fe.js"><link rel="prefetch" href="/assets/13 为什么表数据删掉一半_ 表文件大小不变.html.6b8e9ff0.js"><link rel="prefetch" href="/assets/14 count()这么慢_ 我该怎么办.html.e1e4da4a.js"><link rel="prefetch" href="/assets/15 答疑文章（一） 日志和索引相关问题.html.697b9a23.js"><link rel="prefetch" href="/assets/16 “order by”是怎么工作的.html.9000e742.js"><link rel="prefetch" href="/assets/17 如何正确地显示随机消息.html.4d12fb46.js"><link rel="prefetch" href="/assets/18 为什么这些SQL语句逻辑相同_ 性能却差异巨大.html.48d80708.js"><link rel="prefetch" href="/assets/19 为什么我只查一行的语句_ 也执行这么慢.html.da9eab5a.js"><link rel="prefetch" href="/assets/20 幻读是什么_ 幻读有什么问题.html.95150d1c.js"><link rel="prefetch" href="/assets/21 为什么我只改一行的语句_ 锁这么多.html.b9bda91b.js"><link rel="prefetch" href="/assets/22.MySQL有哪些“饮鸩止渴”提高性能的方法.html.bb805e63.js"><link rel="prefetch" href="/assets/23 MySQL是怎么保证数据不丢的.html.514eb232.js"><link rel="prefetch" href="/assets/24 MySQL是怎么保证主备一致的.html.4cfc99f3.js"><link rel="prefetch" href="/assets/25 MySQL是怎么保证高可用的.html.1561ec1a.js"><link rel="prefetch" href="/assets/26 备库为什么会延迟好几个小时.html.11ef8b3e.js"><link rel="prefetch" href="/assets/27 主库出问题了_ 从库怎么办.html.ef765715.js"><link rel="prefetch" href="/assets/28 读写分离有哪些坑.html.50f4f1d6.js"><link rel="prefetch" href="/assets/29 如何判断一个数据库是不是出问题了.html.60a1c908.js"><link rel="prefetch" href="/assets/30 答疑文章（二） 用动态的观点看加锁.html.b6c6ee60.js"><link rel="prefetch" href="/assets/31 误删数据后除了跑路_ 还能怎么办.html.0fa73bd5.js"><link rel="prefetch" href="/assets/32 为什么还有kill不掉的语句.html.bfe213be.js"><link rel="prefetch" href="/assets/33 我查这么多数据_ 会不会把数据库内存打爆.html.e0558584.js"><link rel="prefetch" href="/assets/34 到底可不可以使用join.html.3087bc74.js"><link rel="prefetch" href="/assets/35 join语句怎么优化.html.c5df5f6e.js"><link rel="prefetch" href="/assets/36 为什么临时表可以重名.html.b9edc687.js"><link rel="prefetch" href="/assets/37 什么时候会使用内部临时表.html.9906de00.js"><link rel="prefetch" href="/assets/38 都说InnoDB好_ 那还要不要使用Memory引擎.html.4b8670c8.js"><link rel="prefetch" href="/assets/39 自增主键为什么不是连续的.html.b78f67d4.js"><link rel="prefetch" href="/assets/40 insert语句的锁为什么这么多.html.b762f081.js"><link rel="prefetch" href="/assets/41 怎么最快地复制一张表.html.e5ec66c1.js"><link rel="prefetch" href="/assets/42 grant之后要跟着flush privileges吗.html.f9b4c2c6.js"><link rel="prefetch" href="/assets/43 要不要使用分区表.html.d4daa082.js"><link rel="prefetch" href="/assets/44 答疑文章（三） 说一说这些好问题.html.1f616fc4.js"><link rel="prefetch" href="/assets/45 自增id用完怎么办.html.25fe22f4.js"><link rel="prefetch" href="/assets/直播回顾 林晓斌 我的 MySQL 心路历程.html.8bb53047.js"><link rel="prefetch" href="/assets/结束语 点线网面_ 一起构建MySQL知识网络.html.63f53d07.js"><link rel="prefetch" href="/assets/00-Introduction.html.aed5c856.js"><link rel="prefetch" href="/assets/00-Preface.html.feee9db3.js"><link rel="prefetch" href="/assets/01-What-is-an-Object.html.ab6ea8b6.js"><link rel="prefetch" href="/assets/02-Installing-Java-and-the-Book-Examples.html.0224a9bf.js"><link rel="prefetch" href="/assets/03-Objects-Everywhere.html.bea55af9.js"><link rel="prefetch" href="/assets/04-Operators.html.35525abf.js"><link rel="prefetch" href="/assets/05-Control-Flow.html.c4cd86f5.js"><link rel="prefetch" href="/assets/06-Housekeeping.html.b5c2b268.js"><link rel="prefetch" href="/assets/07-Implementation-Hiding.html.399ae58f.js"><link rel="prefetch" href="/assets/08-Reuse.html.0ab07e65.js"><link rel="prefetch" href="/assets/09-Polymorphism.html.89443cf5.js"><link rel="prefetch" href="/assets/10-Interfaces.html.4948bb7b.js"><link rel="prefetch" href="/assets/11-Inner-Classes.html.b8f6a196.js"><link rel="prefetch" href="/assets/12-Collections.html.52f2a06b.js"><link rel="prefetch" href="/assets/13-Functional-Programming.html.db50a84d.js"><link rel="prefetch" href="/assets/14-Streams.html.9308751d.js"><link rel="prefetch" href="/assets/15-Exceptions.html.40e68d98.js"><link rel="prefetch" href="/assets/16-Validating-Your-Code.html.3edda5f0.js"><link rel="prefetch" href="/assets/17-Files.html.e87e7c99.js"><link rel="prefetch" href="/assets/18-Strings.html.a2842b17.js"><link rel="prefetch" href="/assets/19-Type-Information.html.12cc605b.js"><link rel="prefetch" href="/assets/20-Generics.html.3e4b17f6.js"><link rel="prefetch" href="/assets/21-Arrays.html.67720723.js"><link rel="prefetch" href="/assets/22-Enumerations.html.ab50f89b.js"><link rel="prefetch" href="/assets/23-Annotations.html.747faef3.js"><link rel="prefetch" href="/assets/24-Concurrent-Programming.html.5b9841aa.js"><link rel="prefetch" href="/assets/25-Patterns.html.10af6fe7.js"><link rel="prefetch" href="/assets/Appendix-Becoming-a-Programmer.html.13f6de18.js"><link rel="prefetch" href="/assets/Appendix-Benefits-and-Costs-of-Static-Type-Checking.html.4774ac79.js"><link rel="prefetch" href="/assets/Appendix-Collection-Topics.html.fec6d369.js"><link rel="prefetch" href="/assets/Appendix-Data-Compression.html.fe3a1870.js"><link rel="prefetch" href="/assets/Appendix-Javadoc.html.54af4f5f.js"><link rel="prefetch" href="/assets/Appendix-Low-Level-Concurrency.html.bb07240e.js"><link rel="prefetch" href="/assets/Appendix-New-IO.html.8f39ad15.js"><link rel="prefetch" href="/assets/Appendix-Object-Serialization.html.39836314.js"><link rel="prefetch" href="/assets/Appendix-Passing-and-Returning-Objects.html.ee52b83c.js"><link rel="prefetch" href="/assets/Appendix-Programming-Guidelines.html.68302b50.js"><link rel="prefetch" href="/assets/Appendix-Standard-IO.html.9b5edd63.js"><link rel="prefetch" href="/assets/Appendix-Supplements.html.c8a5f6e1.js"><link rel="prefetch" href="/assets/Appendix-The-Positive-Legacy-of-C-plus-plus-and-Java.html.34dcd815.js"><link rel="prefetch" href="/assets/Appendix-Understanding-equals-and-hashCode.html.8c0a6980.js"><link rel="prefetch" href="/assets/GLOSSARY.html.af317d6f.js"><link rel="prefetch" href="/assets/index.html.859506fe.js"><link rel="prefetch" href="/assets/404.html.61bcede7.js"><link rel="prefetch" href="/assets/index.html.6eefb2c9.js"><link rel="prefetch" href="/assets/index.html.276bb6b8.js"><link rel="prefetch" href="/assets/index.html.6c49b0c9.js"><link rel="prefetch" href="/assets/index.html.938faca6.js"><link rel="prefetch" href="/assets/index.html.234dfb8d.js"><link rel="prefetch" href="/assets/index.html.02cffa46.js"><link rel="prefetch" href="/assets/index.html.c70b19c7.js"><link rel="prefetch" href="/assets/index.html.e9ae5772.js"><link rel="prefetch" href="/assets/index.html.43ef8dd6.js"><link rel="prefetch" href="/assets/index.html.0319d1c3.js"><link rel="prefetch" href="/assets/ElasticSearch.html.1822d360.js"><link rel="prefetch" href="/assets/MQ.html.257a1eec.js"><link rel="prefetch" href="/assets/MySQL.html.12265bed.js"><link rel="prefetch" href="/assets/Redis.html.c5915ac6.js"><link rel="prefetch" href="/assets/design-patterns.html.4dff82bc.js"><link rel="prefetch" href="/assets/dubbo.html.70900b5c.js"><link rel="prefetch" href="/assets/git.html.9f0ce8a6.js"><link rel="prefetch" href="/assets/java-base.html.f9b49957.js"><link rel="prefetch" href="/assets/jvm.html.7b42d915.js"><link rel="prefetch" href="/assets/linux.html.9f1e7d55.js"><link rel="prefetch" href="/assets/maven.html.f848fc43.js"><link rel="prefetch" href="/assets/multi-thread.html.5d323dfe.js"><link rel="prefetch" href="/assets/mybatis.html.868f5463.js"><link rel="prefetch" href="/assets/network.html.347740e9.js"><link rel="prefetch" href="/assets/nginx.html.acf44958.js"><link rel="prefetch" href="/assets/soft-power.html.fa4cc2bb.js"><link rel="prefetch" href="/assets/spring-boot.html.eb446c44.js"><link rel="prefetch" href="/assets/spring-cloud.html.5a2e7953.js"><link rel="prefetch" href="/assets/spring.html.e5d334fa.js"><link rel="prefetch" href="/assets/tomcat.html.1edb1280.js"><link rel="prefetch" href="/assets/zookeeper.html.d47f6f3b.js"><link rel="prefetch" href="/assets/分布式.html.8362b544.js"><link rel="prefetch" href="/assets/java-basic-questions-01.html.e0b3e691.js"><link rel="prefetch" href="/assets/00 开篇词 这一次_ 让我们一起来搞懂MySQL.html.73dedd46.js"><link rel="prefetch" href="/assets/01 基础架构 一条SQL查询语句是如何执行的.html.a7a61510.js"><link rel="prefetch" href="/assets/02 日志系统 一条SQL更新语句是如何执行的.html.19af1cfc.js"><link rel="prefetch" href="/assets/03 事务隔离 为什么你改了我还看不见.html.078c9131.js"><link rel="prefetch" href="/assets/04 深入浅出索引（上）.html.3da35573.js"><link rel="prefetch" href="/assets/05 深入浅出索引（下）.html.ee1e2ba2.js"><link rel="prefetch" href="/assets/06 全局锁和表锁 给表加个字段怎么有这么多阻碍.html.5796a618.js"><link rel="prefetch" href="/assets/07 行锁功过 怎么减少行锁对性能的影响.html.26f3a028.js"><link rel="prefetch" href="/assets/08 事务到底是隔离的还是不隔离的.html.cbc4b5ad.js"><link rel="prefetch" href="/assets/09 普通索引和唯一索引_ 应该怎么选择.html.d79a5425.js"><link rel="prefetch" href="/assets/10 MySQL为什么有时候会选错索引.html.8dab2c77.js"><link rel="prefetch" href="/assets/11 怎么给字符串字段加索引.html.f8e03fcd.js"><link rel="prefetch" href="/assets/12 为什么我的MySQL会“抖”一下.html.f1c1f80f.js"><link rel="prefetch" href="/assets/13 为什么表数据删掉一半_ 表文件大小不变.html.a0b4da7e.js"><link rel="prefetch" href="/assets/14 count()这么慢_ 我该怎么办.html.8cf5825d.js"><link rel="prefetch" href="/assets/15 答疑文章（一） 日志和索引相关问题.html.63173a34.js"><link rel="prefetch" href="/assets/16 “order by”是怎么工作的.html.a51cc121.js"><link rel="prefetch" href="/assets/17 如何正确地显示随机消息.html.55632279.js"><link rel="prefetch" href="/assets/18 为什么这些SQL语句逻辑相同_ 性能却差异巨大.html.aa190da2.js"><link rel="prefetch" href="/assets/19 为什么我只查一行的语句_ 也执行这么慢.html.c311f962.js"><link rel="prefetch" href="/assets/20 幻读是什么_ 幻读有什么问题.html.bef20aad.js"><link rel="prefetch" href="/assets/21 为什么我只改一行的语句_ 锁这么多.html.54dcb84b.js"><link rel="prefetch" href="/assets/22.MySQL有哪些“饮鸩止渴”提高性能的方法.html.baae2fb3.js"><link rel="prefetch" href="/assets/23 MySQL是怎么保证数据不丢的.html.de07d445.js"><link rel="prefetch" href="/assets/24 MySQL是怎么保证主备一致的.html.d8703177.js"><link rel="prefetch" href="/assets/25 MySQL是怎么保证高可用的.html.93feb431.js"><link rel="prefetch" href="/assets/26 备库为什么会延迟好几个小时.html.14ad8743.js"><link rel="prefetch" href="/assets/27 主库出问题了_ 从库怎么办.html.2e4d7d89.js"><link rel="prefetch" href="/assets/28 读写分离有哪些坑.html.ebe6ec2f.js"><link rel="prefetch" href="/assets/29 如何判断一个数据库是不是出问题了.html.a1a0d482.js"><link rel="prefetch" href="/assets/30 答疑文章（二） 用动态的观点看加锁.html.7353d51d.js"><link rel="prefetch" href="/assets/31 误删数据后除了跑路_ 还能怎么办.html.b546fd0e.js"><link rel="prefetch" href="/assets/32 为什么还有kill不掉的语句.html.fa14f195.js"><link rel="prefetch" href="/assets/33 我查这么多数据_ 会不会把数据库内存打爆.html.ddaebd47.js"><link rel="prefetch" href="/assets/34 到底可不可以使用join.html.9f503937.js"><link rel="prefetch" href="/assets/35 join语句怎么优化.html.95f81089.js"><link rel="prefetch" href="/assets/36 为什么临时表可以重名.html.354471cd.js"><link rel="prefetch" href="/assets/37 什么时候会使用内部临时表.html.c9d4ab47.js"><link rel="prefetch" href="/assets/38 都说InnoDB好_ 那还要不要使用Memory引擎.html.9b369837.js"><link rel="prefetch" href="/assets/39 自增主键为什么不是连续的.html.93069f29.js"><link rel="prefetch" href="/assets/40 insert语句的锁为什么这么多.html.b6a68508.js"><link rel="prefetch" href="/assets/41 怎么最快地复制一张表.html.4cda471b.js"><link rel="prefetch" href="/assets/42 grant之后要跟着flush privileges吗.html.fec20cbf.js"><link rel="prefetch" href="/assets/43 要不要使用分区表.html.46eb93f8.js"><link rel="prefetch" href="/assets/44 答疑文章（三） 说一说这些好问题.html.70884000.js"><link rel="prefetch" href="/assets/45 自增id用完怎么办.html.16cc56b7.js"><link rel="prefetch" href="/assets/直播回顾 林晓斌 我的 MySQL 心路历程.html.0f6a9d34.js"><link rel="prefetch" href="/assets/结束语 点线网面_ 一起构建MySQL知识网络.html.ced5f781.js"><link rel="prefetch" href="/assets/00-Introduction.html.2b1f0852.js"><link rel="prefetch" href="/assets/00-Preface.html.e516d7c3.js"><link rel="prefetch" href="/assets/01-What-is-an-Object.html.86c4af1e.js"><link rel="prefetch" href="/assets/02-Installing-Java-and-the-Book-Examples.html.88cddd12.js"><link rel="prefetch" href="/assets/03-Objects-Everywhere.html.4da53003.js"><link rel="prefetch" href="/assets/04-Operators.html.f9d313c6.js"><link rel="prefetch" href="/assets/05-Control-Flow.html.ecf81ffe.js"><link rel="prefetch" href="/assets/06-Housekeeping.html.c35ecf1b.js"><link rel="prefetch" href="/assets/07-Implementation-Hiding.html.396e0a6f.js"><link rel="prefetch" href="/assets/08-Reuse.html.8c7c4047.js"><link rel="prefetch" href="/assets/09-Polymorphism.html.2150cc57.js"><link rel="prefetch" href="/assets/10-Interfaces.html.6ee853fa.js"><link rel="prefetch" href="/assets/11-Inner-Classes.html.ae7b89c4.js"><link rel="prefetch" href="/assets/12-Collections.html.0483e4dd.js"><link rel="prefetch" href="/assets/13-Functional-Programming.html.63412e72.js"><link rel="prefetch" href="/assets/14-Streams.html.7e7cce42.js"><link rel="prefetch" href="/assets/15-Exceptions.html.c186f23a.js"><link rel="prefetch" href="/assets/16-Validating-Your-Code.html.b3313ffc.js"><link rel="prefetch" href="/assets/17-Files.html.7a9ad498.js"><link rel="prefetch" href="/assets/18-Strings.html.46e57539.js"><link rel="prefetch" href="/assets/19-Type-Information.html.b68894bf.js"><link rel="prefetch" href="/assets/20-Generics.html.3993804b.js"><link rel="prefetch" href="/assets/21-Arrays.html.4d150e5c.js"><link rel="prefetch" href="/assets/22-Enumerations.html.87d060f0.js"><link rel="prefetch" href="/assets/23-Annotations.html.0c455464.js"><link rel="prefetch" href="/assets/24-Concurrent-Programming.html.8485a02c.js"><link rel="prefetch" href="/assets/25-Patterns.html.4f5781b0.js"><link rel="prefetch" href="/assets/Appendix-Becoming-a-Programmer.html.4e7ecda3.js"><link rel="prefetch" href="/assets/Appendix-Benefits-and-Costs-of-Static-Type-Checking.html.1a18282e.js"><link rel="prefetch" href="/assets/Appendix-Collection-Topics.html.ec4969df.js"><link rel="prefetch" href="/assets/Appendix-Data-Compression.html.c956724d.js"><link rel="prefetch" href="/assets/Appendix-Javadoc.html.26db6884.js"><link rel="prefetch" href="/assets/Appendix-Low-Level-Concurrency.html.80dbdde9.js"><link rel="prefetch" href="/assets/Appendix-New-IO.html.613e991c.js"><link rel="prefetch" href="/assets/Appendix-Object-Serialization.html.de90320b.js"><link rel="prefetch" href="/assets/Appendix-Passing-and-Returning-Objects.html.1f3841f2.js"><link rel="prefetch" href="/assets/Appendix-Programming-Guidelines.html.a3de1972.js"><link rel="prefetch" href="/assets/Appendix-Standard-IO.html.28579d58.js"><link rel="prefetch" href="/assets/Appendix-Supplements.html.aae5a747.js"><link rel="prefetch" href="/assets/Appendix-The-Positive-Legacy-of-C-plus-plus-and-Java.html.4bf49d65.js"><link rel="prefetch" href="/assets/Appendix-Understanding-equals-and-hashCode.html.9d9599c8.js"><link rel="prefetch" href="/assets/GLOSSARY.html.d812823c.js"><link rel="prefetch" href="/assets/index.html.d25b0535.js"><link rel="prefetch" href="/assets/404.html.0c8252b8.js"><link rel="prefetch" href="/assets/index.html.d5cc08ad.js"><link rel="prefetch" href="/assets/index.html.1331f6ca.js"><link rel="prefetch" href="/assets/index.html.da6c3a69.js"><link rel="prefetch" href="/assets/index.html.1174fbbd.js"><link rel="prefetch" href="/assets/index.html.c73d2264.js"><link rel="prefetch" href="/assets/index.html.1e315145.js"><link rel="prefetch" href="/assets/index.html.514b72a3.js"><link rel="prefetch" href="/assets/index.html.b19f5086.js"><link rel="prefetch" href="/assets/index.html.1ac6115e.js"><link rel="prefetch" href="/assets/404.3a5fd86b.js"><link rel="prefetch" href="/assets/Layout.42785ec5.js"><link rel="prefetch" href="/assets/Slide.5e14cdfb.js"><link rel="prefetch" href="/assets/Blog.f29d76d0.js"><link rel="prefetch" href="/assets/auto.esm.15d52109.js"><link rel="prefetch" href="/assets/index.1842ee54.js"><link rel="prefetch" href="/assets/mermaid.esm.min.f71f1464.js"><link rel="prefetch" href="/assets/highlight.esm.d982e650.js"><link rel="prefetch" href="/assets/markdown.esm.832a189d.js"><link rel="prefetch" href="/assets/math.esm.a3f84b6f.js"><link rel="prefetch" href="/assets/notes.esm.3c361cb7.js"><link rel="prefetch" href="/assets/reveal.esm.b96f05d8.js"><link rel="prefetch" href="/assets/search.esm.80da4a02.js"><link rel="prefetch" href="/assets/zoom.esm.8514a202.js"><link rel="prefetch" href="/assets/photoswipe.esm.92018b73.js">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="skip-link sr-only">Skip to content</a><!--]--><div class="theme-container has-toc sidebar-open"><!--[--><!--[--><header class="navbar"><button class="toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><a href="/" class="home-link"><img class="logo" src="/logo.png" alt="DTF&#39;s blog"><!----><span class="site-name hide-in-pad">DTF&#39;s blog</span><!--[--><!----><!--]--></a><nav class="nav-links" style=""><div class="nav-item hide-in-mobile"><a href="/" class="nav-link" aria-label="博客主页"><i class="icon iconfont icon-home"></i>博客主页<!----></a></div><div class="nav-item hide-in-mobile"><a href="/guide/" class="nav-link" aria-label="使用指南"><i class="icon iconfont icon-creative"></i>使用指南<!----></a></div></nav><div class="nav-actions-wrapper"><!--[--><!----><!--]--><div class="nav-item"><!----></div><div class="nav-item"><a class="repo-link" href="https://github.com/imdtf/blog" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewbox="0 0 1024 1024" aria-labelledby="github" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><title id="github" lang="en">github icon</title><g fill="currentColor"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></g></svg></a></div><div class="nav-item hide-in-mobile"><button class="outlook-button" tabindex="-1" ariahidden="true"><svg xmlns="http://www.w3.org/2000/svg" class="icon outlook-icon" viewbox="0 0 1024 1024" aria-labelledby="outlook"><title id="outlook" lang="en">outlook icon</title><g fill="currentColor"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4 38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32 51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0 102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2 6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4 0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2 9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224 419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4 470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0 22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6 12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128 505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2 16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8 86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4 80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6 6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></g></svg><div class="outlook-dropdown"><!----></div></button></div><form class="search-box" role="search"><input type="search" autocomplete="off" spellcheck="false" value><!----></form><button class="toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span class="button-container"><span class="button-top"></span><span class="button-middle"></span><span class="button-bottom"></span></span></button><!--[--><!----><!--]--></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow left"></span></div><aside class="sidebar"><!--[--><!----><!--]--><ul class="sidebar-links"><li><!--[--><a href="/" class="nav-link sidebar-link sidebar-page" aria-label="博客主页"><i class="icon iconfont icon-home"></i>博客主页<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable active"><i class="icon iconfont icon-guide"></i><span class="title">语言</span><span class="arrow down"></span></button><ul class="sidebar-links"><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable active"><i class="icon iconfont icon-creative"></i><span class="title">Java</span><span class="arrow down"></span></button><ul class="sidebar-links"><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable active"><i class="icon iconfont icon-creative"></i><span class="title">OnJava8</span><span class="arrow down"></span></button><ul class="sidebar-links"><li><!--[--><a href="/language/java/on-java-8/00-Introduction.html" class="nav-link sidebar-link sidebar-page" aria-label="简介"><!---->简介<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/language/java/on-java-8/00-Preface.html" class="nav-link sidebar-link sidebar-page" aria-label="前言"><!---->前言<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/language/java/on-java-8/01-What-is-an-Object.html" class="nav-link sidebar-link sidebar-page" aria-label="第一章 对象的概念"><!---->第一章 对象的概念<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/language/java/on-java-8/02-Installing-Java-and-the-Book-Examples.html" class="nav-link sidebar-link sidebar-page" aria-label="第二章 安装 Java 和本书用例"><!---->第二章 安装 Java 和本书用例<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/language/java/on-java-8/03-Objects-Everywhere.html" class="nav-link sidebar-link sidebar-page" aria-label="第三章 万物皆对象"><!---->第三章 万物皆对象<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/language/java/on-java-8/04-Operators.html" class="nav-link sidebar-link sidebar-page" aria-label="第四章 运算符"><!---->第四章 运算符<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/language/java/on-java-8/05-Control-Flow.html" class="nav-link sidebar-link sidebar-page" aria-label="第五章 控制流"><!---->第五章 控制流<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/language/java/on-java-8/06-Housekeeping.html" class="nav-link sidebar-link sidebar-page" aria-label="第六章 初始化和清理"><!---->第六章 初始化和清理<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/language/java/on-java-8/07-Implementation-Hiding.html" class="nav-link sidebar-link sidebar-page" aria-label="第七章 封装"><!---->第七章 封装<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/language/java/on-java-8/08-Reuse.html" class="nav-link sidebar-link sidebar-page" aria-label="第八章 复用"><!---->第八章 复用<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/language/java/on-java-8/09-Polymorphism.html" class="nav-link sidebar-link sidebar-page" aria-label="第九章 多态"><!---->第九章 多态<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/language/java/on-java-8/10-Interfaces.html" class="nav-link sidebar-link sidebar-page" aria-label="第十章 接口"><!---->第十章 接口<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/language/java/on-java-8/11-Inner-Classes.html" class="nav-link sidebar-link sidebar-page" aria-label="第十一章 内部类"><!---->第十一章 内部类<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/language/java/on-java-8/12-Collections.html" class="nav-link sidebar-link sidebar-page" aria-label="第十二章 集合"><!---->第十二章 集合<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/language/java/on-java-8/13-Functional-Programming.html" class="nav-link sidebar-link sidebar-page" aria-label="第十三章 函数式编程"><!---->第十三章 函数式编程<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/language/java/on-java-8/14-Streams.html" class="nav-link sidebar-link sidebar-page" aria-label="第十四章 流式编程"><!---->第十四章 流式编程<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/language/java/on-java-8/15-Exceptions.html" class="nav-link sidebar-link sidebar-page" aria-label="第十五章 异常"><!---->第十五章 异常<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/language/java/on-java-8/16-Validating-Your-Code.html" class="nav-link sidebar-link sidebar-page" aria-label="第十六章 代码校验"><!---->第十六章 代码校验<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/language/java/on-java-8/17-Files.html" class="nav-link sidebar-link sidebar-page" aria-label="第十七章 文件"><!---->第十七章 文件<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/language/java/on-java-8/18-Strings.html" class="nav-link sidebar-link sidebar-page" aria-label="第十八章 字符串"><!---->第十八章 字符串<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/language/java/on-java-8/19-Type-Information.html" class="nav-link sidebar-link sidebar-page" aria-label="第十九章 类型信息"><!---->第十九章 类型信息<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/language/java/on-java-8/20-Generics.html" class="nav-link sidebar-link sidebar-page" aria-label="第二十章 泛型"><!---->第二十章 泛型<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/language/java/on-java-8/21-Arrays.html" class="nav-link sidebar-link sidebar-page" aria-label="第二十一章 数组"><!---->第二十一章 数组<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/language/java/on-java-8/22-Enumerations.html" class="nav-link sidebar-link sidebar-page" aria-label="第二十二章 枚举"><!---->第二十二章 枚举<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/language/java/on-java-8/23-Annotations.html" class="nav-link sidebar-link sidebar-page" aria-label="第二十三章 注解"><!---->第二十三章 注解<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/language/java/on-java-8/24-Concurrent-Programming.html" class="nav-link sidebar-link sidebar-page" aria-label="第二十四章 并发编程"><!---->第二十四章 并发编程<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/language/java/on-java-8/25-Patterns.html" class="nav-link sidebar-link sidebar-page" aria-label="第二十五章 设计模式"><!---->第二十五章 设计模式<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/language/java/on-java-8/Appendix-Becoming-a-Programmer.html" class="nav-link sidebar-link sidebar-page" aria-label="附录:成为一名程序员"><!---->附录:成为一名程序员<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/language/java/on-java-8/Appendix-Benefits-and-Costs-of-Static-Type-Checking.html" class="nav-link sidebar-link sidebar-page" aria-label="附录:静态语言类型检查"><!---->附录:静态语言类型检查<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/language/java/on-java-8/Appendix-Collection-Topics.html" class="nav-link sidebar-link sidebar-page" aria-label="附录:集合主题"><!---->附录:集合主题<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/language/java/on-java-8/Appendix-Data-Compression.html" class="nav-link sidebar-link sidebar-page" aria-label="附录:数据压缩"><!---->附录:数据压缩<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-current="page" href="/language/java/on-java-8/Appendix-IO-Streams.html" class="router-link-active router-link-exact-active nav-link active sidebar-link sidebar-page active" aria-label="附录:流式 IO"><!---->附录:流式 IO<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/language/java/on-java-8/Appendix-IO-Streams.html#输入流类型" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="输入流类型"><!---->输入流类型<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/language/java/on-java-8/Appendix-IO-Streams.html#输出流类型" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="输出流类型"><!---->输出流类型<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/language/java/on-java-8/Appendix-IO-Streams.html#添加属性和有用的接口" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="添加属性和有用的接口"><!---->添加属性和有用的接口<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/language/java/on-java-8/Appendix-IO-Streams.html#通过-filterinputstream-从-inputstream-读取" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="通过 FilterInputStream 从 InputStream 读取"><!---->通过 FilterInputStream 从 InputStream 读取<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/language/java/on-java-8/Appendix-IO-Streams.html#通过-filteroutputstream-向-outputstream-写入" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="通过 FilterOutputStream 向 OutputStream 写入"><!---->通过 FilterOutputStream 向 OutputStream 写入<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/language/java/on-java-8/Appendix-IO-Streams.html#reader-和-writer" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Reader 和 Writer"><!---->Reader 和 Writer<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/language/java/on-java-8/Appendix-IO-Streams.html#数据的来源和去处" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="数据的来源和去处"><!---->数据的来源和去处<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/language/java/on-java-8/Appendix-IO-Streams.html#更改流的行为" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="更改流的行为"><!---->更改流的行为<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/language/java/on-java-8/Appendix-IO-Streams.html#未发生改变的类" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="未发生改变的类"><!---->未发生改变的类<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/language/java/on-java-8/Appendix-IO-Streams.html#randomaccessfile-类" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="RandomAccessFile 类"><!---->RandomAccessFile 类<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/language/java/on-java-8/Appendix-IO-Streams.html#io-流典型用途" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="IO 流典型用途"><!---->IO 流典型用途<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/language/java/on-java-8/Appendix-IO-Streams.html#缓冲输入文件" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="缓冲输入文件"><!---->缓冲输入文件<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/language/java/on-java-8/Appendix-IO-Streams.html#从内存输入" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="从内存输入"><!---->从内存输入<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/language/java/on-java-8/Appendix-IO-Streams.html#格式化内存输入" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="格式化内存输入"><!---->格式化内存输入<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/language/java/on-java-8/Appendix-IO-Streams.html#基本文件的输出" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="基本文件的输出"><!---->基本文件的输出<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/language/java/on-java-8/Appendix-IO-Streams.html#文本文件输出快捷方式" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="文本文件输出快捷方式"><!---->文本文件输出快捷方式<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/language/java/on-java-8/Appendix-IO-Streams.html#存储和恢复数据" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="存储和恢复数据"><!---->存储和恢复数据<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/language/java/on-java-8/Appendix-IO-Streams.html#读写随机访问文件" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="读写随机访问文件"><!---->读写随机访问文件<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/language/java/on-java-8/Appendix-IO-Streams.html#本章小结" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="本章小结"><!---->本章小结<!----></a><ul class="sidebar-sub-headers"></ul></li></ul><!--]--></li><li><!--[--><a href="/language/java/on-java-8/Appendix-Javadoc.html" class="nav-link sidebar-link sidebar-page" aria-label="附录:文档注释"><!---->附录:文档注释<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/language/java/on-java-8/Appendix-Low-Level-Concurrency.html" class="nav-link sidebar-link sidebar-page" aria-label="附录:并发底层原理"><!---->附录:并发底层原理<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/language/java/on-java-8/Appendix-New-IO.html" class="nav-link sidebar-link sidebar-page" aria-label="附录:新 IO"><!---->附录:新 IO<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/language/java/on-java-8/Appendix-Object-Serialization.html" class="nav-link sidebar-link sidebar-page" aria-label="附录:对象序列化"><!---->附录:对象序列化<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/language/java/on-java-8/Appendix-Passing-and-Returning-Objects.html" class="nav-link sidebar-link sidebar-page" aria-label="附录:对象传递和返回"><!---->附录:对象传递和返回<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/language/java/on-java-8/Appendix-Programming-Guidelines.html" class="nav-link sidebar-link sidebar-page" aria-label="附录:编程指南"><!---->附录:编程指南<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/language/java/on-java-8/Appendix-Standard-IO.html" class="nav-link sidebar-link sidebar-page" aria-label="附录:标准 IO"><!---->附录:标准 IO<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/language/java/on-java-8/Appendix-Supplements.html" class="nav-link sidebar-link sidebar-page" aria-label="附录:补充"><!---->附录:补充<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/language/java/on-java-8/Appendix-The-Positive-Legacy-of-C-plus-plus-and-Java.html" class="nav-link sidebar-link sidebar-page" aria-label="附录:C++和 Java 的优良传统"><!---->附录:C++和 Java 的优良传统<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/language/java/on-java-8/Appendix-Understanding-equals-and-hashCode.html" class="nav-link sidebar-link sidebar-page" aria-label="附录:理解 equals 和 hashCode 方法"><!---->附录:理解 equals 和 hashCode 方法<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/language/java/on-java-8/GLOSSARY.html" class="nav-link sidebar-link sidebar-page" aria-label="/language/java/on-java-8/GLOSSARY.md"><!---->/language/java/on-java-8/GLOSSARY.md<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section><!--]--></li></ul></section><!--]--></li></ul></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><i class="icon iconfont icon-markdown"></i><span class="title">数据库</span><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><i class="icon iconfont icon-question"></i><span class="title">面试题</span><span class="arrow right"></span></button><!----></section><!--]--></li></ul><!--[--><!----><!--]--></aside><!--[--><main class="page" id="main-content"><!--[--><!----><nav class="breadcrumb disable"></nav><div class="page-title"><h1><!---->附录:流式 IO</h1><div class="page-info"><span class="author-info" aria-label="作者🖊" data-balloon-pos="down" pageview="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewbox="0 0 1024 1024" aria-labelledby="author"><title id="author" lang="en">author icon</title><g fill="currentColor"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></g></svg><span><a class="author-item" href="https://github.com/imdtf" target="_blank" rel="noopener noreferrer">DTF</a></span><span property="author" content="DTF"></span></span><!----><span class="date-info" aria-label="写作日期📅" data-balloon-pos="down" pageview="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewbox="0 0 1024 1024" aria-labelledby="calendar"><title id="calendar" lang="en">calendar icon</title><g fill="currentColor"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></g></svg><span>2022年5月7日</span><meta property="datePublished" content="2022-05-07T12:20:31.000Z"></span><!----><!----><span class="reading-time-info" aria-label="阅读时间⌛" data-balloon-pos="down" pageview="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewbox="0 0 1024 1024" aria-labelledby="timer"><title id="timer" lang="en">timer icon</title><g fill="currentColor"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></g></svg><span>大约 28 分钟</span><meta property="timeRequired" content="PT28M"></span></div><hr></div><div class="toc-place-holder"><aside id="toc-list"><div class="toc-header">此页内容</div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/language/java/on-java-8/Appendix-IO-Streams.html#输入流类型" class="router-link-active router-link-exact-active toc-link level2">输入流类型</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/language/java/on-java-8/Appendix-IO-Streams.html#输出流类型" class="router-link-active router-link-exact-active toc-link level2">输出流类型</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/language/java/on-java-8/Appendix-IO-Streams.html#添加属性和有用的接口" class="router-link-active router-link-exact-active toc-link level2">添加属性和有用的接口</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/language/java/on-java-8/Appendix-IO-Streams.html#通过-filterinputstream-从-inputstream-读取" class="router-link-active router-link-exact-active toc-link level3">通过 FilterInputStream 从 InputStream 读取</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/language/java/on-java-8/Appendix-IO-Streams.html#通过-filteroutputstream-向-outputstream-写入" class="router-link-active router-link-exact-active toc-link level3">通过 FilterOutputStream 向 OutputStream 写入</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/language/java/on-java-8/Appendix-IO-Streams.html#reader-和-writer" class="router-link-active router-link-exact-active toc-link level2">Reader 和 Writer</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/language/java/on-java-8/Appendix-IO-Streams.html#数据的来源和去处" class="router-link-active router-link-exact-active toc-link level3">数据的来源和去处</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/language/java/on-java-8/Appendix-IO-Streams.html#更改流的行为" class="router-link-active router-link-exact-active toc-link level3">更改流的行为</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/language/java/on-java-8/Appendix-IO-Streams.html#未发生改变的类" class="router-link-active router-link-exact-active toc-link level3">未发生改变的类</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/language/java/on-java-8/Appendix-IO-Streams.html#randomaccessfile-类" class="router-link-active router-link-exact-active toc-link level2">RandomAccessFile 类</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/language/java/on-java-8/Appendix-IO-Streams.html#io-流典型用途" class="router-link-active router-link-exact-active toc-link level2">IO 流典型用途</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/language/java/on-java-8/Appendix-IO-Streams.html#缓冲输入文件" class="router-link-active router-link-exact-active toc-link level3">缓冲输入文件</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/language/java/on-java-8/Appendix-IO-Streams.html#从内存输入" class="router-link-active router-link-exact-active toc-link level3">从内存输入</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/language/java/on-java-8/Appendix-IO-Streams.html#格式化内存输入" class="router-link-active router-link-exact-active toc-link level3">格式化内存输入</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/language/java/on-java-8/Appendix-IO-Streams.html#基本文件的输出" class="router-link-active router-link-exact-active toc-link level3">基本文件的输出</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/language/java/on-java-8/Appendix-IO-Streams.html#文本文件输出快捷方式" class="router-link-active router-link-exact-active toc-link level3">文本文件输出快捷方式</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/language/java/on-java-8/Appendix-IO-Streams.html#存储和恢复数据" class="router-link-active router-link-exact-active toc-link level3">存储和恢复数据</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/language/java/on-java-8/Appendix-IO-Streams.html#读写随机访问文件" class="router-link-active router-link-exact-active toc-link level3">读写随机访问文件</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/language/java/on-java-8/Appendix-IO-Streams.html#本章小结" class="router-link-active router-link-exact-active toc-link level2">本章小结</a></li><!----><!--]--></ul></div></aside></div><!----><div class="theme-hope-content"><!--[--><h1 id="附录-流式-io" tabindex="-1"><a class="header-anchor" href="#附录-流式-io" aria-hidden="true">#</a> 附录:流式 IO</h1><blockquote><p>Java 7 引入了一种简单明了的方式来读写文件和操作目录。大多情况下，<a href="/language/java/on-java-8/17-Files.html" class="">文件</a>这一章所介绍的那些库和技术就足够你用了。但是，如果你必须面对一些特殊的需求和比较底层的操作，或者处理一些老版本的代码，那么你就必须了解本附录中的内容。</p></blockquote><p>对于编程语言的设计者来说，实现良好的输入/输出（I/O）系统是一项比较艰难的任务，不同实现方案的数量就可以证明这点。其中的挑战似乎在于要涵盖所有的可能性，你不仅要覆盖到不同的 I/O 源和 I/O 接收器（如文件、控制台、网络连接等），还要实现多种与它们进行通信的方式（如顺序、随机访问、缓冲、二进制、字符、按行和按字等）。</p><p>Java 类库的设计者通过创建大量的类来解决这一难题。一开始，你可能会对 Java I/O 系统提供了如此多的类而感到不知所措。Java 1.0 之后，Java 的 I/O 类库发生了明显的改变，在原来面向字节的类中添加了面向字符和基于 Unicode 的类。在 Java 1.4 中，为了改进性能和功能，又添加了 <code>nio</code> 类（全称是 “new I/O”，Java 1.4 引入，到现在已经很多年了）。这部分在<a href="/language/java/on-java-8/Appendix-New-IO.html" class="">附录：新 I/O</a> 中介绍。</p><p>因此，要想充分理解 Java I/O 系统以便正确运用它，我们需要学习一定数量的类。另外，理解 I/O 类库的演化过程也很有必要，因为如果缺乏历史的眼光，很快我们就会对什么时候该使用哪些类，以及什么时候不该使用它们而感到困惑。</p><p>编程语言的 I/O 类库经常使用<strong>流</strong>这个抽象概念，它将所有数据源或者数据接收器表示为能够产生或者接收数据片的对象。</p><blockquote><p><strong>注意</strong>：Java 8 函数式编程中的 <code>Stream</code> 类和这里的 I/O stream 没有任何关系。这又是另一个例子，如果再给设计者一次重来的机会，他们将使用不同的术语。</p></blockquote><p>I/O 流屏蔽了实际的 I/O 设备中处理数据的细节：</p><ol><li>字节流对应原生的二进制数据；</li><li>字符流对应字符数据，它会自动处理与本地字符集之间的转换；</li><li>缓冲流可以提高性能，通过减少底层 API 的调用次数来优化 I/O。</li></ol><p>从 JDK 文档的类层次结构中可以看到，Java 类库中的 I/O 类分成了输入和输出两部分。在设计 Java 1.0 时，类库的设计者们就决定让所有与输入有关系的类都继承自 <code>InputStream</code>，所有与输出有关系的类都继承自 <code>OutputStream</code>。所有从 <code>InputStream</code> 或 <code>Reader</code> 派生而来的类都含有名为 <code>read()</code> 的基本方法，用于读取单个字节或者字节数组。同样，所有从 <code>OutputStream</code> 或 <code>Writer</code> 派生而来的类都含有名为 <code>write()</code> 的基本方法，用于写单个字节或者字节数组。但是，我们通常不会用到这些方法，它们之所以存在是因为别的类可以使用它们，以便提供更有用的接口。</p><p>我们很少使用单一的类来创建流对象，而是通过叠合多个对象来提供所期望的功能（这是<strong>装饰器设计模式</strong>）。为了创建一个流，你却要创建多个对象，这也是 Java I/O 类库让人困惑的主要原因。</p><p>这里我只会提供这些类的概述，并假定你会使用 JDK 文档来获取它们的详细信息（比如某个类的所以方法的详细列表）。</p><h2 id="输入流类型" tabindex="-1"><a class="header-anchor" href="#输入流类型" aria-hidden="true">#</a> 输入流类型</h2><p><code>InputStream</code> 表示那些从不同数据源产生输入的类，如<a href="#table-io-1">表 I/O-1</a> 所示，这些数据源包括：</p><ol><li>字节数组；</li><li><code>String</code> 对象；</li><li>文件；</li><li>“管道”，工作方式与实际生活中的管道类似：从一端输入，从另一端输出；</li><li>一个由其它种类的流组成的序列，然后我们可以把它们汇聚成一个流；</li><li>其它数据源，如 Internet 连接。</li></ol><p>每种数据源都有相应的 <code>InputStream</code> 子类。另外，<code>FilterInputStream</code> 也属于一种 <code>InputStream</code>，它的作用是为“装饰器”类提供基类。其中，“装饰器”类可以把属性或有用的接口与输入流连接在一起，这个我们稍后再讨论。</p><p><span id="table-io-1"><strong>表 I/O-1 <code>InputStream</code> 类型</strong></span></p><table><thead><tr><th style="text-align:center;">类</th><th style="text-align:left;">功能</th><th style="text-align:left;">构造器参数</th><th style="text-align:left;">如何使用</th></tr></thead><tbody><tr><td style="text-align:center;"><code>ByteArrayInputStream</code></td><td style="text-align:left;">允许将内存的缓冲区当做 <code>InputStream</code> 使用</td><td style="text-align:left;">缓冲区，字节将从中取出</td><td style="text-align:left;">作为一种数据源：将其与 <code>FilterInputStream</code> 对象相连以提供有用接口</td></tr><tr><td style="text-align:center;"><code>StringBufferInputStream</code></td><td style="text-align:left;">将 <code>String</code> 转换成 <code>InputStream</code></td><td style="text-align:left;">字符串。底层实现实际使用 <code>StringBuffer</code></td><td style="text-align:left;">作为一种数据源：将其与 <code>FilterInputStream</code> 对象相连以提供有用接口</td></tr><tr><td style="text-align:center;"><code>FileInputStream</code></td><td style="text-align:left;">用于从文件中读取信息</td><td style="text-align:left;">字符串，表示文件名、文件或 <code>FileDescriptor</code> 对象</td><td style="text-align:left;">作为一种数据源：将其与 <code>FilterInputStream</code> 对象相连以提供有用接口</td></tr><tr><td style="text-align:center;"><code>PipedInputStream</code></td><td style="text-align:left;">产生用于写入相关 <code>PipedOutputStream</code> 的数据。实现“管道化”概念</td><td style="text-align:left;"><code>PipedOutputSteam</code></td><td style="text-align:left;">作为多线程中的数据源：将其与 <code>FilterInputStream</code> 对象相连以提供有用接口</td></tr><tr><td style="text-align:center;"><code>SequenceInputStream</code></td><td style="text-align:left;">将两个或多个 <code>InputStream</code> 对象转换成一个 <code>InputStream</code></td><td style="text-align:left;">两个 <code>InputStream</code> 对象或一个容纳 <code>InputStream</code> 对象的容器 <code>Enumeration</code></td><td style="text-align:left;">作为一种数据源：将其与 <code>FilterInputStream</code> 对象相连以提供有用接口</td></tr><tr><td style="text-align:center;"><code>FilterInputStream</code></td><td style="text-align:left;">抽象类，作为“装饰器”的接口。其中，“装饰器”为其它的 <code>InputStream</code> 类提供有用的功能。见<a href="#table-io-3">表 I/O-3</a></td><td style="text-align:left;">见<a href="#table-io-3">表 I/O-3</a></td><td style="text-align:left;">见<a href="#table-io-3">表 I/O-3</a></td></tr></tbody></table><h2 id="输出流类型" tabindex="-1"><a class="header-anchor" href="#输出流类型" aria-hidden="true">#</a> 输出流类型</h2><p>如<a href="#table-io-2">表 I/O-2</a> 所示，该类别的类决定了输出所要去往的目标：字节数组（但不是 <code>String</code>，当然，你也可以用字节数组自己创建）、文件或管道。</p><p>另外，<code>FilterOutputStream</code> 为“装饰器”类提供了一个基类，“装饰器”类把属性或者有用的接口与输出流连接了起来，这些稍后会讨论。</p><p><span id="table-io-2"><strong>表 I/O-2：<code>OutputStream</code> 类型</strong></span></p><table><thead><tr><th style="text-align:center;">类</th><th style="text-align:left;">功能</th><th style="text-align:left;">构造器参数</th><th style="text-align:left;">如何使用</th></tr></thead><tbody><tr><td style="text-align:center;"><code>ByteArrayOutputStream</code></td><td style="text-align:left;">在内存中创建缓冲区。所有送往“流”的数据都要放置在此缓冲区</td><td style="text-align:left;">缓冲区初始大小（可选）</td><td style="text-align:left;">用于指定数据的目的地：将其与 <code>FilterOutputStream</code> 对象相连以提供有用接口</td></tr><tr><td style="text-align:center;"><code>FileOutputStream</code></td><td style="text-align:left;">用于将信息写入文件</td><td style="text-align:left;">字符串，表示文件名、文件或 <code>FileDescriptor</code> 对象</td><td style="text-align:left;">用于指定数据的目的地：将其与 <code>FilterOutputStream</code> 对象相连以提供有用接口</td></tr><tr><td style="text-align:center;"><code>PipedOutputStream</code></td><td style="text-align:left;">任何写入其中的信息都会自动作为相关 <code>PipedInputStream</code> 的输出。实现“管道化”概念</td><td style="text-align:left;"><code>PipedInputStream</code></td><td style="text-align:left;">指定用于多线程的数据的目的地：将其与 <code>FilterOutputStream</code> 对象相连以提供有用接口</td></tr><tr><td style="text-align:center;"><code>FilterOutputStream</code></td><td style="text-align:left;">抽象类，作为“装饰器”的接口。其中，“装饰器”为其它 <code>OutputStream</code> 提供有用功能。见<a href="#table-io-4">表 I/O-4</a></td><td style="text-align:left;">见<a href="#table-io-4">表 I/O-4</a></td><td style="text-align:left;">见<a href="#table-io-4">表 I/O-4</a></td></tr></tbody></table><h2 id="添加属性和有用的接口" tabindex="-1"><a class="header-anchor" href="#添加属性和有用的接口" aria-hidden="true">#</a> 添加属性和有用的接口</h2><p>装饰器在<a href="/language/java/on-java-8/20-Generics.html" class="">泛型</a>这一章引入。Java I/O 类库需要多种不同功能的组合，这正是使用装饰器模式的原因所在<sup class="footnote-ref"><a href="#footnote1">[1]</a><a class="footnote-anchor" id="footnote-ref1"></a></sup>。而之所以存在 <strong>filter</strong>（过滤器）类，是因为让抽象类 <strong>filter</strong> 作为所有装饰器类的基类。装饰器必须具有和它所装饰对象相同的接口，但它也可以扩展接口，不过这种情况只发生在个别 <strong>filter</strong> 类中。</p><p>但是，装饰器模式也有一个缺点：在编写程序的时候，它给我们带来了相当多的灵活性（因为我们可以很容易地对属性进行混搭），但它同时也增加了代码的复杂性。Java I/O 类库操作不便的原因在于：我们必须创建许多类（“核心” I/O 类型加上所有的装饰器）才能得到我们所希望的单个 I/O 对象。</p><p><code>FilterInputStream</code> 和 <code>FilterOutputStream</code> 是用来提供装饰器类接口以控制特定输入流 <code>InputStream</code> 和 输出流 <code>OutputStream</code> 的两个类，但它们的名字并不是很直观。<code>FilterInputStream</code> 和 <code>FilterOutputStream</code> 分别从 I/O 类库中的基类 <code>InputStream</code> 和 <code>OutputStream</code> 派生而来，这两个类是创建装饰器的必要条件（这样它们才能为所有被装饰的对象提供统一接口）。</p><h3 id="通过-filterinputstream-从-inputstream-读取" tabindex="-1"><a class="header-anchor" href="#通过-filterinputstream-从-inputstream-读取" aria-hidden="true">#</a> 通过 <code>FilterInputStream</code> 从 <code>InputStream</code> 读取</h3><p><code>FilterInputStream</code> 类能够完成两件截然不同的事情。其中，<code>DataInputStream</code> 允许我们读取不同的基本数据类型和 <code>String</code> 类型的对象（所有方法都以 “read” 开头，例如 <code>readByte()</code>、<code>readFloat()</code>等等）。搭配其对应的 <code>DataOutputStream</code>，我们就可以通过数据“流”将基本数据类型的数据从一个地方迁移到另一个地方。具体是那些“地方”是由<a href="#table-io-1">表 I/O-1</a> 中的那些类决定的。</p><p>其它 <code>FilterInputStream</code> 类则在内部修改 <code>InputStream</code> 的行为方式：是否缓冲，是否保留它所读过的行（允许我们查询行数或设置行数），以及是否允许把单个字符推回输入流等等。最后两个类看起来就像是为了创建编译器提供的（它们被添加进来可能是为了对“用 Java 构建编译器”实现提供支持），因此我们在一般编程中不会用到它们。</p><p>在实际应用中，不管连接的是什么 I/O 设备，我们基本上都会对输入进行缓冲。所以当初 I/O 类库如果能默认都让输入进行缓冲，同时将无缓冲输入作为一种特殊情况（或者只是简单地提供一个方法调用），这样会更加合理，而不是像现在这样迫使我们基本上每次都得手动添加缓冲。</p><p><span id="table-io-3"><strong>表 I/O-3：<code>FilterInputStream</code> 类型</strong></span></p><table><thead><tr><th style="text-align:center;">类</th><th style="text-align:left;">功能</th><th style="text-align:left;">构造器参数</th><th style="text-align:left;">如何使用</th></tr></thead><tbody><tr><td style="text-align:center;"><code>DataInputStream</code></td><td style="text-align:left;">与 <code>DataOutputStream</code> 搭配使用，按照移植方式从流读取基本数据类型（<code>int</code>、<code>char</code>、<code>long</code> 等）</td><td style="text-align:left;"><code>InputStream</code></td><td style="text-align:left;">包含用于读取基本数据类型的全部接口</td></tr><tr><td style="text-align:center;"><code>BufferedInputStream</code></td><td style="text-align:left;">使用它可以防止每次读取时都得进行实际写操作。代表“使用缓冲区”</td><td style="text-align:left;"><code>InputStream</code>，可以指定缓冲区大小（可选）</td><td style="text-align:left;">本质上不提供接口，只是向进程添加缓冲功能。与接口对象搭配</td></tr><tr><td style="text-align:center;"><code>LineNumberInputStream</code></td><td style="text-align:left;">跟踪输入流中的行号，可调用 <code>getLineNumber()</code> 和 <code>setLineNumber(int)</code></td><td style="text-align:left;"><code>InputStream</code></td><td style="text-align:left;">仅增加了行号，因此可能要与接口对象搭配使用</td></tr><tr><td style="text-align:center;"><code>PushbackInputStream</code></td><td style="text-align:left;">具有能弹出一个字节的缓冲区，因此可以将读到的最后一个字符回退</td><td style="text-align:left;"><code>InputStream</code></td><td style="text-align:left;">通常作为编译器的扫描器，我们可能永远也不会用到</td></tr></tbody></table><h3 id="通过-filteroutputstream-向-outputstream-写入" tabindex="-1"><a class="header-anchor" href="#通过-filteroutputstream-向-outputstream-写入" aria-hidden="true">#</a> 通过 <code>FilterOutputStream</code> 向 <code>OutputStream</code> 写入</h3><p>与 <code>DataInputStream</code> 对应的是 <code>DataOutputStream</code>，它可以将各种基本数据类型和 <code>String</code> 类型的对象格式化输出到“流”中，。这样一来，任何机器上的任何 <code>DataInputStream</code> 都可以读出它们。所有方法都以 “write” 开头，例如 <code>writeByte()</code>、<code>writeFloat()</code> 等等。</p><p><code>PrintStream</code> 最初的目的就是为了以可视化格式打印所有基本数据类型和 <code>String</code> 类型的对象。这和 <code>DataOutputStream</code> 不同，后者的目的是将数据元素置入“流”中，使 <code>DataInputStream</code> 能够可移植地重构它们。</p><p><code>PrintStream</code> 内有两个重要方法：<code>print()</code> 和 <code>println()</code>。它们都被重载了，可以打印各种各种数据类型。<code>print()</code> 和 <code>println()</code> 之间的差异是，后者在操作完毕后会添加一个换行符。</p><p><code>PrintStream</code> 可能会造成一些问题，因为它捕获了所有 <code>IOException</code>（因此，我们必须使用 <code>checkError()</code> 自行测试错误状态，如果出现错误它会返回 <code>true</code>）。另外，<code>PrintStream</code> 没有处理好国际化问题。这些问题都在 <code>PrintWriter</code> 中得到了解决，这在后面会讲到。</p><p><code>BufferedOutputStream</code> 是一个修饰符，表明这个“流”使用了缓冲技术，因此每次向流写入的时候，不是每次都会执行物理写操作。我们在进行输出操作的时候可能会经常用到它。</p><p><span id="table-io-4"><strong>表 I/O-4：<code>FilterOutputStream</code> 类型</strong></span></p><table><thead><tr><th style="text-align:center;">类</th><th style="text-align:left;">功能</th><th style="text-align:left;">构造器参数</th><th style="text-align:left;">如何使用</th></tr></thead><tbody><tr><td style="text-align:center;"><code>DataOutputStream</code></td><td style="text-align:left;">与 <code>DataInputStream</code> 搭配使用，因此可以按照移植方式向流中写入基本数据类型（<code>int</code>、<code>char</code>、<code>long</code> 等）</td><td style="text-align:left;"><code>OutputStream</code></td><td style="text-align:left;">包含用于写入基本数据类型的全部接口</td></tr><tr><td style="text-align:center;"><code>PrintStream</code></td><td style="text-align:left;">用于产生格式化输出。其中 <code>DataOutputStream</code> 处理数据的存储，<code>PrintStream</code> 处理显示</td><td style="text-align:left;"><code>OutputStream</code>，可以用 <code>boolean</code> 值指示是否每次换行时清空缓冲区（可选）</td><td style="text-align:left;">应该是对 <code>OutputStream</code> 对象的 <code>final</code> 封装。可能会经常用到它</td></tr><tr><td style="text-align:center;"><code>BufferedOutputStream</code></td><td style="text-align:left;">使用它以避免每次发送数据时都进行实际的写操作。代表“使用缓冲区”。可以调用 <code>flush()</code> 清空缓冲区</td><td style="text-align:left;"><code>OutputStream</code>，可以指定缓冲区大小（可选）</td><td style="text-align:left;">本质上并不提供接口，只是向进程添加缓冲功能。与接口对象搭配</td></tr></tbody></table><h2 id="reader-和-writer" tabindex="-1"><a class="header-anchor" href="#reader-和-writer" aria-hidden="true">#</a> Reader 和 Writer</h2><p>Java 1.1 对基本的 I/O 流类库做了重大的修改。你初次遇到 <code>Reader</code> 和 <code>Writer</code> 时，可能会以为这两个类是用来替代 <code>InputStream</code> 和 <code>OutputStream</code> 的，但实际上并不是这样。尽管一些原始的“流”类库已经过时了（如果使用它们，编译器会发出警告），但是 <code>InputStream</code> 和 <code>OutputStream</code> 在面向字节 I/O 这方面仍然发挥着极其重要的作用，而 <code>Reader</code> 和 <code>Writer</code> 则提供兼容 Unicode 和面向字符 I/O 的功能。另外：</p><ol><li><p>Java 1.1 往 <code>InputStream</code> 和 <code>OutputStream</code> 的继承体系中又添加了一些新类，所以这两个类显然是不会被取代的；</p></li><li><p>有时我们必须把来自“字节”层级结构中的类和来自“字符”层次结构中的类结合起来使用。为了达到这个目的，需要用到“适配器（adapter）类”：<code>InputStreamReader</code> 可以把 <code>InputStream</code> 转换为 <code>Reader</code>，而 <code>OutputStreamWriter</code> 可以把 <code>OutputStream</code> 转换为 <code>Writer</code>。</p></li></ol><p>设计 <code>Reader</code> 和 <code>Writer</code> 继承体系主要是为了国际化。老的 I/O 流继承体系仅支持 8 比特的字节流，并且不能很好地处理 16 比特的 Unicode 字符。由于 Unicode 用于字符国际化（Java 本身的 <code>char</code> 也是 16 比特的 Unicode），所以添加 <code>Reader</code> 和 <code>Writer</code> 继承体系就是为了让所有的 I/O 操作都支持 Unicode。另外，新类库的设计使得它的操作比旧类库要快。</p><h3 id="数据的来源和去处" tabindex="-1"><a class="header-anchor" href="#数据的来源和去处" aria-hidden="true">#</a> 数据的来源和去处</h3><p>几乎所有原始的 Java I/O 流类都有相应的 <code>Reader</code> 和 <code>Writer</code> 类来提供原生的 Unicode 操作。但是在某些场合，面向字节的 <code>InputStream</code> 和 <code>OutputStream</code> 才是正确的解决方案。特别是 <code>java.util.zip</code> 类库就是面向字节而不是面向字符的。因此，最明智的做法是尽量<strong>尝试</strong>使用 <code>Reader</code> 和 <code>Writer</code>，一旦代码没法成功编译，你就会发现此时应该使用面向字节的类库了。</p><p>下表展示了在两个继承体系中，信息的来源和去处（即数据物理上来自哪里又去向哪里）之间的对应关系：</p><table><thead><tr><th style="text-align:center;">来源与去处：Java 1.0 类</th><th style="text-align:center;">相应的 Java 1.1 类</th></tr></thead><tbody><tr><td style="text-align:center;"><code>InputStream</code></td><td style="text-align:center;"><code>Reader</code> <br> 适配器：<code>InputStreamReader</code></td></tr><tr><td style="text-align:center;"><code>OutputStream</code></td><td style="text-align:center;"><code>Writer</code> <br> 适配器：<code>OutputStreamWriter</code></td></tr><tr><td style="text-align:center;"><code>FileInputStream</code></td><td style="text-align:center;"><code>FileReader</code></td></tr><tr><td style="text-align:center;"><code>FileOutputStream</code></td><td style="text-align:center;"><code>FileWriter</code></td></tr><tr><td style="text-align:center;"><code>StringBufferInputStream</code>（已弃用）</td><td style="text-align:center;"><code>StringReader</code></td></tr><tr><td style="text-align:center;">（无相应的类）</td><td style="text-align:center;"><code>StringWriter</code></td></tr><tr><td style="text-align:center;"><code>ByteArrayInputStream</code></td><td style="text-align:center;"><code>CharArrayReader</code></td></tr><tr><td style="text-align:center;"><code>ByteArrayOutputStream</code></td><td style="text-align:center;"><code>CharArrayWriter</code></td></tr><tr><td style="text-align:center;"><code>PipedInputStream</code></td><td style="text-align:center;"><code>PipedReader</code></td></tr><tr><td style="text-align:center;"><code>PipedOutputStream</code></td><td style="text-align:center;"><code>PipedWriter</code></td></tr></tbody></table><p>总的来说，这两个不同的继承体系中的接口即便不能说完全相同，但也是非常相似的。</p><h3 id="更改流的行为" tabindex="-1"><a class="header-anchor" href="#更改流的行为" aria-hidden="true">#</a> 更改流的行为</h3><p>对于 <code>InputStream</code> 和 <code>OutputStream</code> 来说，我们会使用 <code>FilterInputStream</code> 和 <code>FilterOutputStream</code> 的装饰器子类来修改“流”以满足特殊需要。<code>Reader</code> 和 <code>Writer</code> 的类继承体系沿用了相同的思想——但是并不完全相同。</p><p>在下表中，左右之间对应关系的近似程度现比上一个表格更加粗略一些。造成这种差别的原因是类的组织形式不同，<code>BufferedOutputStream</code> 是 <code>FilterOutputStream</code> 的子类，但 <code>BufferedWriter</code> 却不是 <code>FilterWriter</code> 的子类（尽管 <code>FilterWriter</code> 是抽象类，但却没有任何子类，把它放在表格里只是占个位置，不然你可能奇怪 <code>FilterWriter</code> 上哪去了）。然而，这些类的接口却又十分相似。</p><table><thead><tr><th style="text-align:left;">过滤器：Java 1.0 类</th><th style="text-align:left;">相应 Java 1.1 类</th></tr></thead><tbody><tr><td style="text-align:left;"><code>FilterInputStream</code></td><td style="text-align:left;"><code>FilterReader</code></td></tr><tr><td style="text-align:left;"><code>FilterOutputStream</code></td><td style="text-align:left;"><code>FilterWriter</code> (抽象类，没有子类)</td></tr><tr><td style="text-align:left;"><code>BufferedInputStream</code></td><td style="text-align:left;"><code>BufferedReader</code>（也有 <code>readLine()</code>)</td></tr><tr><td style="text-align:left;"><code>BufferedOutputStream</code></td><td style="text-align:left;"><code>BufferedWriter</code></td></tr><tr><td style="text-align:left;"><code>DataInputStream</code></td><td style="text-align:left;">使用 <code>DataInputStream</code>（ 如果必须用到 <code>readLine()</code>，那你就得使用 <code>BufferedReader</code>。否则，一般情况下就用 <code>DataInputStream</code></td></tr><tr><td style="text-align:left;"><code>PrintStream</code></td><td style="text-align:left;"><code>PrintWriter</code></td></tr><tr><td style="text-align:left;"><code>LineNumberInputStream</code></td><td style="text-align:left;"><code>LineNumberReader</code></td></tr><tr><td style="text-align:left;"><code>StreamTokenizer</code></td><td style="text-align:left;"><code>StreamTokenizer</code>（使用具有 <code>Reader</code> 参数的构造器）</td></tr><tr><td style="text-align:left;"><code>PushbackInputStream</code></td><td style="text-align:left;"><code>PushbackReader</code></td></tr></tbody></table><p>有一条限制需要明确：一旦要使用 <code>readLine()</code>，我们就不应该用 <code>DataInputStream</code>（否则，编译时会得到使用了过时方法的警告），而应该使用 <code>BufferedReader</code>。除了这种情况之外的情形中，<code>DataInputStream</code> 仍是 I/O 类库的首选成员。</p><p>为了使用时更容易过渡到 <code>PrintWriter</code>，它提供了一个既能接受 <code>Writer</code> 对象又能接受任何 <code>OutputStream</code> 对象的构造器。<code>PrintWriter</code> 的格式化接口实际上与 <code>PrintStream</code> 相同。</p><p>Java 5 添加了几种 <code>PrintWriter</code> 构造器，以便在将输出写入时简化文件的创建过程，你马上就会见到它们。</p><p>其中一种 <code>PrintWriter</code> 构造器还有一个执行<strong>自动 flush</strong><sup class="footnote-ref"><a href="#footnote2">[2]</a><a class="footnote-anchor" id="footnote-ref2"></a></sup> 的选项。如果构造器设置了该选项，就会在每个 <code>println()</code> 调用之后，自动执行 flush。</p><h3 id="未发生改变的类" tabindex="-1"><a class="header-anchor" href="#未发生改变的类" aria-hidden="true">#</a> 未发生改变的类</h3><p>有一些类在 Java 1.0 和 Java 1.1 之间未做改变。</p><table><thead><tr><th>以下这些 Java 1.0 类在 Java 1.1 中没有相应类</th></tr></thead><tbody><tr><td><code>DataOutputStream</code></td></tr><tr><td><code>File</code></td></tr><tr><td><code>RandomAccessFile</code></td></tr><tr><td><code>SequenceInputStream</code></td></tr></tbody></table><p>特别是 <code>DataOutputStream</code>，在使用时没有任何变化；因此如果想以可传输的格式存储和检索数据，请用 <code>InputStream</code> 和 <code>OutputStream</code> 继承体系。</p><h2 id="randomaccessfile-类" tabindex="-1"><a class="header-anchor" href="#randomaccessfile-类" aria-hidden="true">#</a> RandomAccessFile 类</h2><p><code>RandomAccessFile</code> 适用于由大小已知的记录组成的文件，所以我们可以使用 <code>seek()</code> 将文件指针从一条记录移动到另一条记录，然后对记录进行读取和修改。文件中记录的大小不一定都相同，只要我们能确定那些记录有多大以及它们在文件中的位置即可。</p><p>最初，我们可能难以相信 <code>RandomAccessFile</code> 不是 <code>InputStream</code> 或者 <code>OutputStream</code> 继承体系中的一部分。除了实现了 <code>DataInput</code> 和 <code>DataOutput</code> 接口（<code>DataInputStream</code> 和 <code>DataOutputStream</code> 也实现了这两个接口）之外，它和这两个继承体系没有任何关系。它甚至都不使用 <code>InputStream</code> 和 <code>OutputStream</code> 类中已有的任何功能。它是一个完全独立的类，其所有的方法（大多数都是 <code>native</code> 方法）都是从头开始编写的。这么做是因为 <code>RandomAccessFile</code> 拥有和别的 I/O 类型本质上不同的行为，因为我们可以在一个文件内向前和向后移动。在任何情况下，它都是自我独立的，直接继承自 <code>Object</code>。</p><p>从本质上来讲，<code>RandomAccessFile</code> 的工作方式类似于把 <code>DataIunputStream</code> 和 <code>DataOutputStream</code> 组合起来使用。另外它还有一些额外的方法，比如使用 <code>getFilePointer()</code> 可以得到当前文件指针在文件中的位置，使用 <code>seek()</code> 可以移动文件指针，使用 <code>length()</code> 可以得到文件的长度。另外，其构造器还需要传入第二个参数（和 C 语言中的 <code>fopen()</code> 相同）用来表示我们是准备对文件进行 “随机读”（r）还是“读写”（rw）。它并不支持只写文件，从这点来看，如果当初 <code>RandomAccessFile</code> 能设计成继承自 <code>DataInputStream</code>，可能也是个不错的实现方式。</p><p>在 Java 1.4 中，<code>RandomAccessFile</code> 的大多数功能（但不是全部）都被 nio 中的<strong>内存映射文件</strong>（mmap）取代，详见<a href="/language/java/on-java-8/Appendix-New-IO.html" class="">附录：新 I/O</a>。</p><h2 id="io-流典型用途" tabindex="-1"><a class="header-anchor" href="#io-流典型用途" aria-hidden="true">#</a> IO 流典型用途</h2><p>尽管我们可以用不同的方式来组合 I/O 流类，但常用的也就其中几种。你可以下面的例子可以作为 I/O 典型用法的基本参照（在你确定无法使用<a href="/language/java/on-java-8/17-Files.html" class="">文件</a>这一章所述的库之后）。</p><p>在这些示例中，异常处理都被简化为将异常传递给控制台，但是这样做只适用于小型的示例和工具。在你自己的代码中，你需要考虑更加复杂的错误处理方式。</p><h3 id="缓冲输入文件" tabindex="-1"><a class="header-anchor" href="#缓冲输入文件" aria-hidden="true">#</a> 缓冲输入文件</h3><p>如果想要打开一个文件进行字符输入，我们可以使用一个 <code>FileInputReader</code> 对象，然后传入一个 <code>String</code> 或者 <code>File</code> 对象作为文件名。为了提高速度，我们希望对那个文件进行缓冲，那么我们可以将所产生的引用传递给一个 <code>BufferedReader</code> 构造器。<code>BufferedReader</code> 提供了 <code>line()</code> 方法，它会产生一个 <code>Stream&lt;String&gt;</code> 对象：</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// iostreams/BufferedInputFile.java</span>
<span class="token comment">// {VisuallyInspectOutput}</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BufferedInputFile</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">String</span> <span class="token function">read</span><span class="token punctuation">(</span><span class="token class-name">String</span> filename<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">(</span><span class="token class-name">BufferedReader</span> in <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedReader</span><span class="token punctuation">(</span>
                <span class="token keyword">new</span> <span class="token class-name">FileReader</span><span class="token punctuation">(</span>filename<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> in<span class="token punctuation">.</span><span class="token function">lines</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">joining</span><span class="token punctuation">(</span><span class="token string">&quot;\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>
                <span class="token function">read</span><span class="token punctuation">(</span><span class="token string">&quot;BufferedInputFile.java&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p><code>Collectors.joining()</code> 在其内部使用了一个 <code>StringBuilder</code> 来累加其运行结果。该文件会通过 <code>try-with-resources</code> 子句自动关闭。</p><h3 id="从内存输入" tabindex="-1"><a class="header-anchor" href="#从内存输入" aria-hidden="true">#</a> 从内存输入</h3><p>下面示例中，从 <code>BufferedInputFile.read()</code> 读入的 <code>String</code> 被用来创建一个 <code>StringReader</code> 对象。然后调用其 <code>read()</code> 方法，每次读取一个字符，并把它显示在控制台上：</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// iostreams/MemoryInput.java</span>
<span class="token comment">// {VisuallyInspectOutput}</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MemoryInput</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span>
    <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token class-name">StringReader</span> in <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringReader</span><span class="token punctuation">(</span>
                <span class="token class-name">BufferedInputFile</span><span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token string">&quot;MemoryInput.java&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> c<span class="token punctuation">;</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>c <span class="token operator">=</span> in<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token punctuation">)</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>注意 <code>read()</code> 是以 <code>int</code> 形式返回下一个字节，所以必须类型转换为 <code>char</code> 才能正确打印。</p><h3 id="格式化内存输入" tabindex="-1"><a class="header-anchor" href="#格式化内存输入" aria-hidden="true">#</a> 格式化内存输入</h3><p>要读取格式化数据，我们可以使用 <code>DataInputStream</code>，它是一个面向字节的 I/O 类（不是面向字符的）。这样我们就必须使用 <code>InputStream</code> 类而不是 <code>Reader</code> 类。我们可以使用 <code>InputStream</code> 以字节形式读取任何数据（比如一个文件），但这里使用的是字符串。</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// iostreams/FormattedMemoryInput.java</span>
<span class="token comment">// {VisuallyInspectOutput}</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FormattedMemoryInput</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">(</span>
            <span class="token class-name">DataInputStream</span> in <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DataInputStream</span><span class="token punctuation">(</span>
                <span class="token keyword">new</span> <span class="token class-name">ByteArrayInputStream</span><span class="token punctuation">(</span>
                    <span class="token class-name">BufferedInputFile</span><span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>
                        <span class="token string">&quot;FormattedMemoryInput.java&quot;</span><span class="token punctuation">)</span>
                            <span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token punctuation">)</span> in<span class="token punctuation">.</span><span class="token function">readByte</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">EOFException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\nEnd of stream&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><p><code>ByteArrayInputStream</code> 必须接收一个字节数组，所以这里我们调用了 <code>String.getBytes()</code> 方法。所产生的的 <code>ByteArrayInputStream</code> 是一个适合传递给 <code>DataInputStream</code> 的 <code>InputStream</code>。</p><p>如果我们用 <code>readByte()</code> 从 <code>DataInputStream</code> 一次一个字节地读取字符，那么任何字节的值都是合法结果，因此返回值不能用来检测输入是否结束。取而代之的是，我们可以使用 <code>available()</code> 方法得到剩余可用字符的数量。下面例子演示了怎么一次一个字节地读取文件：</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// iostreams/TestEOF.java</span>
<span class="token comment">// Testing for end of file</span>
<span class="token comment">// {VisuallyInspectOutput}</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestEOF</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">(</span>
            <span class="token class-name">DataInputStream</span> in <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DataInputStream</span><span class="token punctuation">(</span>
                <span class="token keyword">new</span> <span class="token class-name">BufferedInputStream</span><span class="token punctuation">(</span>
                    <span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token string">&quot;TestEOF.java&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">while</span> <span class="token punctuation">(</span>in<span class="token punctuation">.</span><span class="token function">available</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>in<span class="token punctuation">.</span><span class="token function">readByte</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>注意，<code>available()</code> 的工作方式会随着所读取媒介类型的不同而有所差异，它的字面意思就是“在没有阻塞的情况下所能读取的字节数”。对于文件，能够读取的是整个文件；但是对于其它类型的“流”，可能就不是这样，所以要谨慎使用。</p><p>我们也可以通过捕获异常来检测输入的末尾。但是，用异常作为控制流是对异常的一种错误使用方式。</p><h3 id="基本文件的输出" tabindex="-1"><a class="header-anchor" href="#基本文件的输出" aria-hidden="true">#</a> 基本文件的输出</h3><p><code>FileWriter</code> 对象用于向文件写入数据。实际使用时，我们通常会用 <code>BufferedWriter</code> 将其包装起来以增加缓冲的功能（可以试试移除此包装来感受一下它对性能的影响——缓冲往往能显著地增加 I/O 操作的性能）。在本例中，为了提供格式化功能，它又被装饰成了 <code>PrintWriter</code>。按照这种方式创建的数据文件可作为普通文本文件来读取。</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// iostreams/BasicFileOutput.java</span>
<span class="token comment">// {VisuallyInspectOutput}</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BasicFileOutput</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> <span class="token class-name">String</span> file <span class="token operator">=</span> <span class="token string">&quot;BasicFileOutput.dat&quot;</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">(</span>
            <span class="token class-name">BufferedReader</span> in <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedReader</span><span class="token punctuation">(</span>
                <span class="token keyword">new</span> <span class="token class-name">StringReader</span><span class="token punctuation">(</span>
                     <span class="token class-name">BufferedInputFile</span><span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>
                         <span class="token string">&quot;BasicFileOutput.java&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">PrintWriter</span> out <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PrintWriter</span><span class="token punctuation">(</span>
                    <span class="token keyword">new</span> <span class="token class-name">BufferedWriter</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileWriter</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">)</span> <span class="token punctuation">{</span>
            in<span class="token punctuation">.</span><span class="token function">lines</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>out<span class="token operator">::</span><span class="token function">println</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// Show the stored file:</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">BufferedInputFile</span><span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><p><code>try-with-resources</code> 语句会自动 flush 并关闭文件。</p><h3 id="文本文件输出快捷方式" tabindex="-1"><a class="header-anchor" href="#文本文件输出快捷方式" aria-hidden="true">#</a> 文本文件输出快捷方式</h3><p>Java 5 在 <code>PrintWriter</code> 中添加了一个辅助构造器，有了它，你在创建并写入文件时，就不必每次都手动执行一些装饰的工作。下面的代码使用这种快捷方式重写了 <code>BasicFileOutput.java</code>：</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// iostreams/FileOutputShortcut.java</span>
<span class="token comment">// {VisuallyInspectOutput}</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FileOutputShortcut</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> <span class="token class-name">String</span> file <span class="token operator">=</span> <span class="token string">&quot;FileOutputShortcut.dat&quot;</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">(</span>
            <span class="token class-name">BufferedReader</span> in <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedReader</span><span class="token punctuation">(</span>
                <span class="token keyword">new</span> <span class="token class-name">StringReader</span><span class="token punctuation">(</span><span class="token class-name">BufferedInputFile</span><span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>
                    <span class="token string">&quot;FileOutputShortcut.java&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// Here&#39;s the shortcut:</span>
            <span class="token class-name">PrintWriter</span> out <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PrintWriter</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span>
        <span class="token punctuation">)</span> <span class="token punctuation">{</span>
            in<span class="token punctuation">.</span><span class="token function">lines</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>out<span class="token operator">::</span><span class="token function">println</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">BufferedInputFile</span><span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><p>使用这种方式仍具备了缓冲的功能，只是现在不必自己手动添加缓冲了。但遗憾的是，其它常见的写入任务都没有快捷方式，因此典型的 I/O 流依旧涉及大量冗余的代码。本书<a href="/language/java/on-java-8/17-Files.html" class="">文件</a>一章中介绍的另一种方式，对此类任务进行了极大的简化。</p><h3 id="存储和恢复数据" tabindex="-1"><a class="header-anchor" href="#存储和恢复数据" aria-hidden="true">#</a> 存储和恢复数据</h3><p><code>PrintWriter</code> 是用来对可读的数据进行格式化。但如果要输出可供另一个“流”恢复的数据，我们可以用 <code>DataOutputStream</code> 写入数据，然后用 <code>DataInputStream</code> 恢复数据。当然，这些流可能是任何形式，在下面的示例中使用的是一个文件，并且对读写都进行了缓冲。注意 <code>DataOutputStream</code> 和 <code>DataInputStream</code> 是面向字节的，因此要使用 <code>InputStream</code> 和 <code>OutputStream</code> 体系的类。</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// iostreams/StoringAndRecoveringData.java</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StoringAndRecoveringData</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">(</span>
            <span class="token class-name">DataOutputStream</span> out <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DataOutputStream</span><span class="token punctuation">(</span>
                <span class="token keyword">new</span> <span class="token class-name">BufferedOutputStream</span><span class="token punctuation">(</span>
                    <span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span><span class="token string">&quot;Data.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">)</span> <span class="token punctuation">{</span>
            out<span class="token punctuation">.</span><span class="token function">writeDouble</span><span class="token punctuation">(</span><span class="token number">3.14159</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            out<span class="token punctuation">.</span><span class="token function">writeUTF</span><span class="token punctuation">(</span><span class="token string">&quot;That was pi&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            out<span class="token punctuation">.</span><span class="token function">writeDouble</span><span class="token punctuation">(</span><span class="token number">1.41413</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            out<span class="token punctuation">.</span><span class="token function">writeUTF</span><span class="token punctuation">(</span><span class="token string">&quot;Square root of 2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">try</span> <span class="token punctuation">(</span>
            <span class="token class-name">DataInputStream</span> in <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DataInputStream</span><span class="token punctuation">(</span>
                <span class="token keyword">new</span> <span class="token class-name">BufferedInputStream</span><span class="token punctuation">(</span>
                    <span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token string">&quot;Data.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>in<span class="token punctuation">.</span><span class="token function">readDouble</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// Only readUTF() will recover the</span>
            <span class="token comment">// Java-UTF String properly:</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>in<span class="token punctuation">.</span><span class="token function">readUTF</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>in<span class="token punctuation">.</span><span class="token function">readDouble</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>in<span class="token punctuation">.</span><span class="token function">readUTF</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div><p>输出结果：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>3.14159
That was pi
1.41413
Square root of 2
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>如果我们使用 <code>DataOutputStream</code> 进行数据写入，那么 Java 就保证了即便读和写数据的平台多么不同，我们仍可以使用 <code>DataInputStream</code> 准确地读取数据。这一点很有价值，众所周知，人们曾把大量精力耗费在数据的平台相关性问题上。但现在，只要两个平台上都有 Java，就不会存在这样的问题<sup class="footnote-ref"><a href="#footnote3">[3]</a><a class="footnote-anchor" id="footnote-ref3"></a></sup>。</p><p>当我们使用 <code>DastaOutputStream</code> 时，写字符串并且让 <code>DataInputStream</code> 能够恢复它的唯一可靠方式就是使用 UTF-8 编码，在这个示例中是用 <code>writeUTF()</code> 和 <code>readUTF()</code> 来实现的。UTF-8 是一种多字节格式，其编码长度根据实际使用的字符集会有所变化。如果我们使用的只是 ASCII 或者几乎都是 ASCII 字符（只占 7 比特），那么就显得及其浪费空间和带宽，所以 UTF-8 将 ASCII 字符编码成一个字节的形式，而非 ASCII 字符则编码成两到三个字节的形式。另外，字符串的长度保存在 UTF-8 字符串的前两个字节中。但是，<code>writeUTF()</code> 和 <code>readUTF()</code> 使用的是一种适用于 Java 的 UTF-8 变体（JDK 文档中有这些方法的详尽描述），因此如果我们用一个非 Java 程序读取用 <code>writeUTF()</code> 所写的字符串时，必须编写一些特殊的代码才能正确读取。</p><p>有了 <code>writeUTF()</code> 和 <code>readUTF()</code>，我们就可以在 <code>DataOutputStream</code> 中把字符串和其它数据类型混合使用。因为字符串完全可以作为 Unicode 格式存储，并且可以很容易地使用 <code>DataInputStream</code> 来恢复它。</p><p><code>writeDouble()</code> 将 <code>double</code> 类型的数字存储在流中，并用相应的 <code>readDouble()</code> 恢复它（对于其它的书类型，也有类似的方法用于读写）。但是为了保证所有的读方法都能够正常工作，我们必须知道流中数据项所在的确切位置，因为极有可能将保存的 <code>double</code> 数据作为一个简单的字节序列、<code>char</code> 或其它类型读入。因此，我们必须：要么为文件中的数据采用固定的格式；要么将额外的信息保存到文件中，通过解析额外信息来确定数据的存放位置。注意，对象序列化和 XML （二者都在<a href="/language/java/on-java-8/Appendix-Object-Serialization.html" class="">附录：对象序列化</a>中介绍）是存储和读取复杂数据结构的更简单的方式。</p><h3 id="读写随机访问文件" tabindex="-1"><a class="header-anchor" href="#读写随机访问文件" aria-hidden="true">#</a> 读写随机访问文件</h3><p>使用 <code>RandomAccessFile</code> 就像是使用了一个 <code>DataInputStream</code> 和 <code>DataOutputStream</code> 的结合体（因为它实现了相同的接口：<code>DataInput</code> 和 <code>DataOutput</code>）。另外，我们还可以使用 <code>seek()</code> 方法移动文件指针并修改对应位置的值。</p><p>在使用 <code>RandomAccessFile</code> 时，你必须清楚文件的结构，否则没法正确使用它。<code>RandomAccessFile</code> 有一套专门的方法来读写基本数据类型的数据和 UTF-8 编码的字符串：</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// iostreams/UsingRandomAccessFile.java</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UsingRandomAccessFile</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> <span class="token class-name">String</span> file <span class="token operator">=</span> <span class="token string">&quot;rtest.dat&quot;</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">display</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">(</span>
            <span class="token class-name">RandomAccessFile</span> rf <span class="token operator">=</span>
                <span class="token keyword">new</span> <span class="token class-name">RandomAccessFile</span><span class="token punctuation">(</span>file<span class="token punctuation">,</span> <span class="token string">&quot;r&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">7</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>
                    <span class="token string">&quot;Value &quot;</span> <span class="token operator">+</span> i <span class="token operator">+</span> <span class="token string">&quot;: &quot;</span> <span class="token operator">+</span> rf<span class="token punctuation">.</span><span class="token function">readDouble</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>rf<span class="token punctuation">.</span><span class="token function">readUTF</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">(</span>
            <span class="token class-name">RandomAccessFile</span> rf <span class="token operator">=</span>
                <span class="token keyword">new</span> <span class="token class-name">RandomAccessFile</span><span class="token punctuation">(</span>file<span class="token punctuation">,</span> <span class="token string">&quot;rw&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">7</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
                rf<span class="token punctuation">.</span><span class="token function">writeDouble</span><span class="token punctuation">(</span>i <span class="token operator">*</span> <span class="token number">1.414</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            rf<span class="token punctuation">.</span><span class="token function">writeUTF</span><span class="token punctuation">(</span><span class="token string">&quot;The end of the file&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            rf<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">display</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">try</span> <span class="token punctuation">(</span>
            <span class="token class-name">RandomAccessFile</span> rf <span class="token operator">=</span>
                <span class="token keyword">new</span> <span class="token class-name">RandomAccessFile</span><span class="token punctuation">(</span>file<span class="token punctuation">,</span> <span class="token string">&quot;rw&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">)</span> <span class="token punctuation">{</span>
            rf<span class="token punctuation">.</span><span class="token function">seek</span><span class="token punctuation">(</span><span class="token number">5</span> <span class="token operator">*</span> <span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            rf<span class="token punctuation">.</span><span class="token function">writeDouble</span><span class="token punctuation">(</span><span class="token number">47.0001</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            rf<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">display</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br></div></div><p>输出结果：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>Value 0: 0.0
Value 1: 1.414
Value 2: 2.828
Value 3: 4.242
Value 4: 5.656
Value 5: 7.069999999999999
Value 6: 8.484
The end of the file
Value 0: 0.0
Value 1: 1.414
Value 2: 2.828
Value 3: 4.242
Value 4: 5.656
Value 5: 47.0001
Value 6: 8.484
The end of the file
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p><code>display()</code> 方法打开了一个文件，并以 <code>double</code> 值的形式显示了其中的七个元素。在 <code>main()</code> 中，首先创建了文件，然后打开并修改了它。因为 <code>double</code> 总是 8 字节长，所以如果要用 <code>seek()</code> 定位到第 5 个（从 0 开始计数） <code>double</code> 值，则要传入的地址值应该为 <code>5*8</code>。</p><p>正如前面所诉，虽然 <code>RandomAccess</code> 实现了 <code>DataInput</code> 和 <code>DataOutput</code> 接口，但实际上它和 I/O 继承体系中的其它部分是分离的。它不支持装饰，故而不能将其与 <code>InputStream</code> 及 <code>OutputStream</code> 子类中的任何一个组合起来，所以我们也没法给它添加缓冲的功能。</p><p>该类的构造器还有第二个必选参数：我们可以指定让 <code>RandomAccessFile</code> 以“只读”（r）方式或“读写” （rw）方式打开文件。</p><p>除此之外，还可以使用 <code>nio</code> 中的“内存映射文件”代替 <code>RandomAccessFile</code>，这在<a href="/language/java/on-java-8/Appendix-New-IO.html" class="">附录：新 I/O</a>中有介绍。</p><h2 id="本章小结" tabindex="-1"><a class="header-anchor" href="#本章小结" aria-hidden="true">#</a> 本章小结</h2><p>Java 的 I/O 流类库的确能够满足我们的基本需求：我们可以通过控制台、文件、内存块，甚至因特网进行读写。通过继承，我们可以创建新类型的输入和输出对象。并且我们甚至可以通过重新定义“流”所接受对象类型的 <code>toString()</code> 方法，进行简单的扩展。当我们向一个期望收到字符串的方法传送一个非字符串对象时，会自动调用对象的 <code>toString()</code> 方法（这是 Java 中有限的“自动类型转换”功能之一）。</p><p>在 I/O 流类库的文档和设计中，仍留有一些没有解决的问题。例如，我们打开一个文件用于输出，如果在我们试图覆盖这个文件时能抛出一个异常，这样会比较好（有的编程系统只有当该文件不存在时，才允许你将其作为输出文件打开）。在 Java 中，我们应该使用一个 <code>File</code> 对象来判断文件是否存在，因为如果我们用 <code>FileOutputStream</code> 或者 <code>FileWriter</code> 打开，那么这个文件肯定会被覆盖。</p><p>I/O 流类库让我们喜忧参半。它确实挺有用的，而且还具有可移植性。但是如果我们没有理解“装饰器”模式，那么这种设计就会显得不是很直观。所以，它的学习成本相对较高。而且它并不完善，比如说在过去，我不得不编写相当数量的代码去实现一个读取文本文件的工具——所幸的是，Java 7 中的 nio 消除了此类需求。</p><p>一旦你理解了装饰器模式，并且开始在某些需要这种灵活性的场景中使用该类库，那么你就开始能从这种设计中受益了。到那时候，为此额外多写几行代码的开销应该不至于让人觉得太麻烦。但还是请务必检查一下，确保使用<a href="/language/java/on-java-8/17-Files.html" class="">文件</a>一章中的库和技术没法解决问题后，再考虑使用本章的 I/O 流库。</p><div style="page-break-after:always;"></div><hr class="footnotes-sep"><section class="footnotes"><ol class="footnotes-list"><li id="footnote1" class="footnote-item"><p>很难说这就是一个很好的设计选择，尤其是与其它编程语言中简单的 I/O 类库相比较。但它确实是如此选择的一个正当理由。 <a href="#footnote-ref1" class="footnote-backref">↩︎</a></p></li><li id="footnote2" class="footnote-item"><p>译者注：“flush” 直译是“清空”，意思是把缓冲中的数据清空，输送到对应的目的地（如文件和屏幕）。 <a href="#footnote-ref2" class="footnote-backref">↩︎</a></p></li><li id="footnote3" class="footnote-item"><p>XML 是另一种方式，可以解决在不同计算平台之间移动数据，而不依赖于所有平台上都有 Java 这一问题。XML 将在<a href="/language/java/on-java-8/Appendix-Object-Serialization.html" class="">附录：对象序列化</a>一章中进行介绍。 <a href="#footnote-ref3" class="footnote-backref">↩︎</a></p></li></ol></section><!--]--></div><!----><footer class="page-meta"><div class="meta-item edit-link"><a href="https://github.com/imdtf/blog/edit/main/docs/language/java/on-java-8/Appendix-IO-Streams.md" rel="noopener noreferrer" target="_blank" aria-label="编辑此页" class="nav-link label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewbox="0 0 1024 1024" aria-labelledby="edit"><title id="edit" lang="en">edit icon</title><g fill="currentColor"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></g></svg><!--]-->编辑此页<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><div class="meta-item update-time"><span class="label">上次编辑于: </span><span class="info">2022/5/7 20:20:31</span></div><div class="meta-item contributors"><span class="label">贡献者: </span><!--[--><!--[--><span class="contributor" title="email: imdtf@qq.com">DTF</span><!--]--><!--]--></div></footer><nav class="page-nav"><a href="/language/java/on-java-8/Appendix-Data-Compression.html" class="nav-link prev" aria-label="附录:数据压缩"><div class="hint"><span class="arrow left"></span>上一页</div><div class="link"><!---->附录:数据压缩</div></a><a href="/language/java/on-java-8/Appendix-Javadoc.html" class="nav-link next" aria-label="附录:文档注释"><div class="hint">下一页<span class="arrow right"></span></div><div class="link">附录:文档注释<!----></div></a></nav><!----><!----><!--]--></main><!--]--><footer class="footer-wrapper"><div class="footer">默认页脚</div><div class="copyright">Copyright © 2022 DTF</div></footer><!--]--></div><!--]--><!----><!----><div id="pwa-install"><!----><div id="install-modal-wrapper" style="display:none;"><div class="background"></div><div class="install-modal"><div class="header"><button class="close-button" aria-label="关闭"><svg xmlns="http://www.w3.org/2000/svg" class="icon close-icon" viewbox="0 0 1024 1024" aria-labelledby="close"><title id="close" lang="en">close icon</title><g fill="currentColor"><path d="M589.654 511.965 1007.212 84.22a49.777 49.777 0 0 0-.73-70.02 49.046 49.046 0 0 0-69.687.665L519.967 441.946 85.882 14.2a49.08 49.08 0 0 0-69.687.664 49.777 49.777 0 0 0 .664 70.019l433.454 427.082L16.859 939.048a49.777 49.777 0 0 0-.664 70.019 49.013 49.013 0 0 0 69.687.663l434.085-427.746 416.828 427.083A49.013 49.013 0 0 0 972.037 1024a48.416 48.416 0 0 0 34.512-14.27 49.777 49.777 0 0 0 .73-70.019z"></path></g></svg></button><div class="logo"><!----><div class="title"><h1></h1><p class="desc">该应用可以安装在你的 PC 或移动设备上。这将使该 Web 应用程序外观和行为与其他应用程序相同。它将在出现在应用程序列表中，并可以固定到主屏幕，开始菜单或任务栏。此 Web 应用程序还将能够与其他应用程序和你的操作系统安全地进行交互。</p></div></div></div><div class="content"><div class="highlight"><!----><!----></div><div class="description"><h3>详情</h3><p></p></div></div><div class="button-wrapper"><button class="install-button">安装<span></span></button><button class="cancel-button">取消</button></div></div></div></div><!--]--></div>
    <script type="module" src="/assets/app.597ce2f2.js" defer></script>
  </body>
</html>
